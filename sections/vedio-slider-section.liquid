<section class="videos-section">
  <div class="page-width">
    {%- unless section.settings.heading == blank -%}
      <div class="title-wrapper-with-link{% if posts_displayed > 2 %} title-wrapper--self-padded-tablet-down{% else %} title-wrapper--self-padded-mobile{% endif %} title-wrapper--no-top-margin">
        <h2
          id="SectionHeading-{{ section.id }}"
          class="blog__title inline-richtext {{ section.settings.heading_size }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
          {% if settings.animations_reveal_on_scroll %}
            data-cascade
          {% endif %}
        >
          {{ section.settings.heading }}
        </h2>

        {%- if section.settings.blog != blank
          and section.settings.show_view_all
          and section.settings.post_limit < section.settings.blog.articles_count
        -%}
          <a
            href="{{ section.settings.blog.url }}"
            class="link underlined-link large-up-hide{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
          >
            {{ 'sections.featured_blog.view_all' | t }}
          </a>
        {%- endif -%}
      </div>
    {%- endunless -%}
    <div class="videos-main-block">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'youtube_video' -%}
            <div class="video_wrap">
              <div class="video-inner-block">
                {%- if block.settings.video_url != blank -%}
                  <iframe
                    width="100%;"
                    height="400px;"
                    src="https://www.youtube.com/embed/{{ block.settings.video_url.id }}"
                  ></iframe>
                {%- endif -%}
              </div>
            </div>
          {% when 'local_video' %}
            <div class="video_wrap">
              {% assign poster = block.settings.poster_img | img_url: 'master' %}
              {%- if block.settings.video != blank -%}
                {{
                  block.settings.video
                  | video_tag: autoplay: true, loop: true, muted: true, class: 'video-items', controls: false
                }}
              {%- endif -%}
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</section>
{% schema %}
{
  "name": "Video Slider",
  "settings": [],
  "blocks": [
    {
      "type": "local_video",
      "name": "Shopify video",
      "settings": [
        {
          "type": "video",
          "id": "video",
          "label": "Select Video"
        },
        {
          "type": "image_picker",
          "id": "poster_img",
          "label": "Select video poster"
        }
      ]
    },
    {
      "type": "youtube_video",
      "name": "Youtube video",
      "settings": [
        {
          "type": "video_url",
          "id": "video_url",
          "accept": ["vimeo","youtube"],
          "label": "Select Video"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video Slider"
    }
  ]
}
{% endschema %}
